name: My CI v1

on: 
	workflow_dispatch:
	# To run CI flow for PRs
	# pull_request:
	# branches:
	# - main
	# paths: 
	# - 'force-app/**'
jobs:
	build:
		runs-on: ubuntu-latest
		steps:
			steps:
			- uses: actions/checkout@v4
			# if: github.event.action == 'opened' || github.event.action == 'synchronize'
			- uses: actions/setup-node@v4
			with:
				node-version: 'latest'

	- name: Install Salesforce CLI
		run: |
			npm install @salesforce/cli --global
			sf --version
			sf plugins --core
			# npm install sfdx-cli
			# node_modules/sfdx-cli/bin/run --version
			# node_modules/sfdx-cli/bin/run plugins --core

# - name: Authenticate DevHub
#       run: |
#         echo "${SALESFORCE_JWT_SECRET_KEY}" > server.key
#         node_modules/sfdx-cli/bin/run force:auth:jwt:grant --clientid ${{ secrets.SALESFORCE_CONSUMER_KEY }} --jwtkeyfile server.key --username ${{ secrets.SALESFORCE_DEVHUB_USERNAME}} --setdefaultdevhubusername -a devhub
#       env:
#         SALESFORCE_JWT_SECRET_KEY: ${{ secrets.SALESFORCE_JWT_SECRET_KEY }}